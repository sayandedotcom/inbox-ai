+---------------------------------------------------+
|             START: Fetch Email                    |
|        (via IMAP or load from JSON file)          |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|        Create EmailState Object                   |
|  (set current_email, history, metadata)           |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|             SUPERVISOR PIPELINE                   |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|            Filtering Node                         |
| - Analyze email content (subject/body)            |
| - Classify as: spam, urgent, needs_review,         |
|   or informational                                |
+---------------------------------------------------+
                     |
                     v
              +--------------+
              | Is Spam?     |
              +--------------+
                     |
        Yes ------->|  Discard and EXIT Pipeline  |
                     |
        No  -------> v
+---------------------------------------------------+
|           Summarization Node                      |
| - Generate a concise summary of the email         |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|          Response Generation Node                 |
| - Generate reply using summary & email details     |
+---------------------------------------------------+
                     |
                     v
       +---------------------------------+
       |  Does response need human review?|
       +---------------------------------+
              /                \
           Yes                  No
            |                    |
            v                    v
+--------------------------+  +--------------------------+
|   Human Review Node      |  | Accept Auto-Generated    |
| - User modifies response |  |    Response              |
+--------------------------+  +--------------------------+
            \                /
             \              /
              v            v
+---------------------------------------------------+
|     Update EmailState History with Response       |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|     END SUPERVISOR PIPELINE & DISPLAY             |
|      Generated Response to User                   |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|   Ask: "Do you want to make changes?"             |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|    (If Yes) User Inputs Modified Response         |
+---------------------------------------------------+
                     |
                     v
+---------------------------------------------------+
|   Prompt: "Do you want to (s)end or (d)raft?"      |
+---------------------------------------------------+
                     |
         +-----------+-----------+
         |                       |
         v                       v
+--------------------+   +-------------------------------+
|  If "s":          |   |  If "d":                     |
|  Call send_email() |   |  Prompt for Gmail address    |
|  (send via SMTP)   |   |  and call send_draft_to_gmail()|
+--------------------+   +-------------------------------+
         |                       |
         +-----------+-----------+
                     |
                     v
+---------------------------------------------------+
|               FINISH: All Emails Processed        |
+---------------------------------------------------+
